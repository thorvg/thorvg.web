<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@thorvg/lottie-player | Lottie Example</title>

    <style>
      body {
        margin: 0;
        padding: 0;
        background-color: #4b4b4b;
        font-family: Arial, sans-serif;
      }

      #container {
        display: grid;
        grid-template-columns: repeat(10, 1fr);
        grid-template-rows: repeat(10, 1fr);
        width: 100vw;
        height: 100vh;
        gap: 0;
      }

      .lottie-item {
        width: 100%;
        height: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
        position: relative;
      }

      lottie-player {
        width: 100%;
        height: 100%;
      }

      #loading {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        color: white;
        font-size: 24px;
        z-index: 1000;
      }
    </style>
    <script src="../packages/lottie-player/dist/lottie-player.js" type="text/javascript"></script>
  </head>
  <body>
    <div id="loading">Loading animations...</div>
    <div id="container"></div>

    <script>
      const NUM_PER_ROW = 10;
      const NUM_PER_COL = 10;
      const MAX_ANIMATIONS = NUM_PER_ROW * NUM_PER_COL;

      const lottieFiles = [
        '1643-exploding-star.json',
        '5317-fireworkds.json',
        '5344-honey-sack-hud.json',
        '11555.json',
        '27746-joypixels-partying-face-emoji-animation.json',
        'R_QPKIVi.json',
        'abstract_circle.json',
        'alien.json',
        'anubis.json',
        'balloons_with_string.json',
        'birth_stone_logo.json',
        'calculator.json',
        'card_hover.json',
        'cat_loader.json',
        'coin.json',
        'confetti.json',
        'confetti2.json',
        'confettiBird.json',
        'dancing_book.json',
        'dancing_star.json',
        'dash-offset.json',
        'day_to_night.json',
        'dodecahedron.json',
        'down.json',
        'dropball.json',
        'duck.json',
        'emoji_enjoying.json',
        'emoji.json',
        'fleche.json',
        'flipping_page.json',
        'fly_in_beaker.json',
        'focal_test.json',
        'foodrating.json',
        'frog_vr.json',
        'fun_animation.json',
        'funky_chicken.json',
        'game_finished.json',
        'geometric.json',
        'glow_loading.json',
        'ghost.json',
        'ghost2.json',
        'gradient_background.json',
        'gradient_infinite.json',
        'gradient_sleepy_loader.json',
        'gradient_smoke.json',
        'graph.json',
        'growup.json',
        'guitar.json',
        'hamburger.json',
        'happy_holidays.json',
        'happy_trio.json',
        'heart_fill.json',
        'hola.json',
        'holdanimation.json',
        'hourglass.json',
        'isometric.json',
        'kote.json',
        'la_communaute.json',
        '1f409.json',
        'like_button.json',
        'like.json',
        'loading_rectangle.json',
        'lolo_walk.json',
        'lolo.json',
        'loveface_emoji.json',
        'masking.json',
        'material_wave_loading.json',
        'merging_shapes.json',
        'message.json',
        'monkey.json',
        'morphing_anim.json',
        'new_design.json',
        'page_slide.json',
        'personal_character.json',
        'polystar_anim.json',
        'polystar.json',
        'property_market.json',
        'pumpkin.json',
        'ripple_loading_animation.json',
        'rufo.json',
        'sample.json',
        'seawalk.json',
        'shutup.json',
        'skullboy.json',
        'starburst.json',
        'starstrips.json',
        'starts_transparent.json',
        'stroke_dash.json',
        'swinging.json',
        'text_anim.json',
        'text2.json',
        'textblock.json',
        'textrange.json',
        'threads.json',
        'train.json',
        'uk_flag.json',
        'voice_recognition.json',
        'water_filling.json',
        'waves.json',
        'yarn_loading.json'
      ].sort((a, b) => a.localeCompare(b));

      async function loadAnimations() {
        const container = document.getElementById('container');
        const loading = document.getElementById('loading');
        
        const animationsToLoad = Math.min(lottieFiles.length, MAX_ANIMATIONS);
        const animationSize = `${window.innerWidth / NUM_PER_ROW}px`;
        const animationPath = window.location.href.split('/').slice(0, -1).join('/');

        for (let i = 0; i < animationsToLoad; i++) {
          const div = document.createElement('div');
          div.className = 'lottie-item';
          
          const player = document.createElement('lottie-player');
          player.autoPlay = true;
          player.loop = true;
          player.src = `${animationPath}/resources/${lottieFiles[i]}`;
          player.wasmUrl = "../packages/lottie-player/dist/thorvg.wasm";
          player.renderConfig = { enableDevicePixelRatio: true, renderer: 'sw' };
          player.style.width = animationSize;
          player.style.height = animationSize;
          
          div.appendChild(player);
          container.appendChild(div);
          
          console.log(`Lottie: ${player.src}`);
        }
        
        loading.style.display = 'none';
      }

      window.addEventListener('DOMContentLoaded', loadAnimations);
    </script>

    <script src="https://mrdoob.github.io/stats.js/build/stats.min.js"></script>
    <script>
      var statsFPS = new Stats();
      statsFPS.showPanel(0);
      statsFPS.dom.style.cssText =
        "position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000";
      document.body.appendChild(statsFPS.dom);

      var statsMS = new Stats();
      statsMS.showPanel(1);
      statsMS.dom.style.cssText =
        "position:fixed;top:0;left:80px;cursor:pointer;opacity:0.9;z-index:10000";
      document.body.appendChild(statsMS.dom);

      var statsMB;
      if (self.performance && self.performance.memory) {
        statsMB = new Stats();
        statsMB.showPanel(2);
        statsMB.dom.style.cssText =
          "position:fixed;top:0;left:160px;cursor:pointer;opacity:0.9;z-index:10000";
        document.body.appendChild(statsMB.dom);
      }

      function animate() {
        statsFPS.begin();
        statsMS.begin();
        if (statsMB) statsMB.begin();

        statsFPS.end();
        statsMS.end();
        if (statsMB) statsMB.end();

        requestAnimationFrame(animate);
      }

      requestAnimationFrame(animate);
    </script>
  </body>
</html>